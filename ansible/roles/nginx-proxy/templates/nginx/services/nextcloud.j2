# THIS IS JUST AN EXAMPLE
# Configuration for nextcloud container
server {
        listen 443 ssl;
        server_name cloud.{{ inventory_hostname }};

        location / {
                proxy_pass http://{{ nextcloud.internal_ip }};
                proxy_set_header Host $host;
                proxy_set_header X-Real-IP  $remote_addr;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        }

        location /.well-known/carddav {
                rewrite /.well-known/carddav /remote.php/dav;
        }

        location /.well-known/caldav {
                rewrite /.well-known/caldav /remote.php/dav;
        }

        location ^~ /.well-known {
                return 301 /index.php$uri;
        }
}
